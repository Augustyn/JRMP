<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="__MSG_risk.management.gadget.title__" directory_title="__MSG_risk.management.gadget.title__"
                 description="__MSG_risk.management.gadget.description__">
        <Optional feature="gadget-directory">
            <Param name="categories">
                AMG
                JIRA
            </Param>
        </Optional>
        <Optional feature="atlassian.util" />
        <Optional feature="auth-refresh" />
        <Require feature="views" />
        <Require feature="settitle"/>
        <Require feature="oauthpopup" />
        #oauth
        <Locale messages="__ATLASSIAN_BASE_URL__/download/resources/net.amg.jira.plugins.jira-risk-management/i18n/ALL_ALL.xml"/>
        <Locale country="PL" lang="pl" messages="__ATLASSIAN_BASE_URL__/download/resources/net.amg.jira.plugins.jira-risk-management/i18n/pl_PL.xml"/>

    </ModulePrefs>

    <UserPref name="test" display_name="__MSG_gadget.title__" datatype="bool" default_value="true"/>
    <UserPref name="Project" datatype="hidden" required="true"/>

    <UserPref name="Template" datatype="hidden"/>

    <UserPref name="Filter" datatype="hidden"/>

    <UserPref name="Date" datatype="hidden"/>

    <UserPref name="Title" default_value="" datatype="hidden"/>

    <UserPref name="RefreshInterval" datatype="hidden"/>


    <Content type="html" >
        #requireResource("com.atlassian.gadgets.publisher:ajs-gadgets")
        #requireResource("net.amg.jira.plugins.jira-risk-management:jira-risk-management-resources")
        #includeResources()
        <![CDATA[
            <script type="text/javascript">
                var args = {};
                args.baseUrl = " __MSG_risk.management.gadget.title_"
                try {
                   gadgets.util.registerOnLoadHandler(AMG.jrmp.init(args));
                } catch (e) {
                    console.log("Unable to initialize gadget.",e);
                }
            </script>
        ]]>
    </Content>
</Module>
